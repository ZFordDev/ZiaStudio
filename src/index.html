<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>ZiaStudio</title>
  <link rel="stylesheet" href="styles/output.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> <!-- For Markdown rendering, will need to be replaced for production -->
</head>
<body class="theme-light h-screen overflow-hidden flex flex-col">

  <header class="bg-slate-800 text-white p-3 shadow-md flex justify-between items-center z-50">
    <div class="flex items-center gap-3">
      <button id="toggleLeft" class="p-1 hover:bg-slate-700 rounded transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
      </button>
      <h1 class="text-lg font-bold tracking-tight text-indigo-400">ZiaStudio</h1>
    </div>
    
    <div class="flex items-center gap-3">
      <button id="toggleRight" class="p-1 hover:bg-slate-700 rounded transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
      </button>
    </div>
  </header>

  <div class="flex flex-1 overflow-hidden relative">
    
    <aside id="sidebarLeft" class="w-64 bg-slate-100 border-r border-slate-200 transition-all duration-300 ease-in-out">
      <div class="p-4">
      
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xs font-bold text-slate-500 uppercase">History</h3>
        
          <!-- New Chat Button -->
          <button id="newChatBtn"
            class="p-1.5 rounded bg-indigo-500 text-white text-xs hover:bg-indigo-600 transition">
            + New
          </button>
        </div>
      
        <ul id="chatHistoryList" class="space-y-2 text-sm text-slate-600">
          <!-- Sessions will be injected here -->
        </ul>
      </div>
    </aside>

    <main class="flex-1 flex flex-col bg-white relative">
      <div id="messageContainer" class="flex-1 overflow-y-auto p-8 space-y-6">
        <div class="max-w-2xl mx-auto italic text-slate-400 text-center mt-20">
          Start a new conversation...
        </div>
      </div>

      <div class="p-6 border-t border-slate-100">
        <div class="max-w-3xl mx-auto relative flex items-end gap-2 bg-slate-50 p-2 rounded-lg border border-slate-200 focus-within:border-indigo-400 transition-colors">
          <textarea id="userInput" rows="1" 
            class="flex-1 bg-transparent border-none focus:ring-0 p-2 text-slate-700 resize-none min-h-[40px] max-h-48"
            placeholder="Write a message..."></textarea>
          <button id="sendBtn" class="bg-indigo-600 text-white p-2 rounded-md hover:bg-indigo-700 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
          </button>
        </div>
      </div>
    </main>

    <aside id="sidebarRight" class="w-0 overflow-hidden bg-slate-100 border-l border-slate-200 transition-all duration-300 ease-in-out">
      <div class="w-64 h-full flex flex-col">

        <div class="p-4 border-b border-slate-200">
          <h3 class="text-xs font-bold text-slate-500 uppercase mb-3">Settings</h3>

          <!-- Tabs -->
          <div class="flex text-sm font-medium">
            <button id="tabBasic" class="flex-1 py-1.5 text-left text-indigo-600 border-b-2 border-indigo-600">
              Basic
            </button>
            <button id="tabAdvanced" class="flex-1 py-1.5 text-left text-slate-500 hover:text-slate-700 border-b-2 border-transparent">
              Advanced
            </button>
          </div>
        </div>

        <!-- BASIC TAB CONTENT -->
        <div id="settingsBasic" class="p-4 space-y-4">
          <div>
            <!-- AI BACKEND SELECTION -->
            <div>
              <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">AI Backend</label>
              <select id="aiBackendSelect" class="w-full p-2 rounded border border-slate-300 text-sm">
                <option value="local">Local</option>
                <option value="cloud">Cloud</option>
              </select>
            </div>

            <!-- LOCAL ENGINE SELECTION (shown only when backend = local) -->
            <div id="localEngineBlock">
              <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">Local Engine</label>
              <select id="localEngineSelect" class="w-full p-2 rounded border border-slate-300 text-sm">
                <option value="ollama">Ollama</option>
                <!-- Future engines -->
                <!-- <option value="lmstudio">LM Studio</option> -->
                <!-- <option value="gpt4all">GPT4All</option> -->
              </select>
            </div>

            <!-- OLLAMA CONNECTION SETTINGS (shown only when engine = ollama) -->
            <div id="ollamaConnectionBlock" class="space-y-3">
            
              <div>
                <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">Protocol</label>
                <select id="ollamaProtocol" class="w-full p-2 rounded border border-slate-300 text-sm">
                  <option value="http">http</option>
                  <option value="https">https</option>
                </select>
              </div>
            
              <div>
                <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">Host</label>
                <input id="ollamaHost" type="text"
                  class="w-full p-2 rounded border border-slate-300 text-sm"
                  value="localhost">
              </div>
            
              <div>
                <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">Port</label>
                <input id="ollamaPort" type="number"
                  class="w-full p-2 rounded border border-slate-300 text-sm"
                  value="11434">
              </div>

              <div>
                <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">Model</label>
                <select id="ollamaModel" class="w-full p-2 rounded border border-slate-300 text-sm">
                  <option value="">Loading...</option>
                </select>
              </div>
            
            </div>

            <!-- THEME SELECTION -->
             <!-- these do not currently work for renderer-->
            <label class="text-xs font-bold text-slate-500 uppercase mb-2 block">Theme</label>
            <select id="themeSelect" class="w-full p-2 rounded border border-slate-300 text-sm">
              <option value="light">Light Mode</option>
              <option value="dark">Dark Mode</option>
              <option value="solarized">Solarized</option>
              <option value="arctic">Arctic Dark</option>
            </select>
          </div>
        </div>

        <!-- ADVANCED TAB CONTENT -->
        <div id="settingsAdvanced" class="p-4 space-y-4 hidden">

          <!-- Use Raw Sampler -->
           <!-- needs a simpler name, possibly drop down menu-->
          <div>
            <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">
              Raw Sampling Mode
            </label>
            <label class="flex items-center space-x-2">
              <input id="ollamaRawMode" type="checkbox" class="toggle-switch">
              <span class="text-sm text-slate-600">Use /generate</span>
            </label>
          </div>
        
          <!-- Temperature -->
           <!-- needs to be universal not ollama (ollama has temp issues)-->
          <div>
            <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">Temperature</label>
            <input id="ollamaTemp" type="number" step="0.1" min="0" max="2"
              class="w-full p-2 rounded border border-slate-300 text-sm">
          </div>
        
          <!-- Max Tokens -->
          <div>
            <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">Max Tokens</label>
            <input id="ollamaMaxTokens" type="number"
              class="w-full p-2 rounded border border-slate-300 text-sm">
          </div>
        
          <!-- Custom System Prompt -->
          <div>
            <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">Custom System Prompt</label>
            <textarea id="ollamaCustomPrompt" rows="3"
              class="w-full p-2 rounded border border-slate-300 text-sm"></textarea>
          </div>
        
          <!-- SnapDock Integration (disabled breadcrumb) -->
          <div class="opacity-40 pointer-events-none">
            <label class="text-xs font-bold text-slate-500 uppercase mb-1 block">
              SnapDock Integration
            </label>
            <label class="flex items-center space-x-2">
              <input type="checkbox" disabled class="toggle-switch">
              <span class="text-sm text-slate-500">Coming Soon</span>
            </label>
          </div>
        
        </div>

      </div>
    </aside>

  </div>

  <footer class="bg-slate-900 text-slate-400 px-4 py-1.5 flex justify-between items-center text-[11px] font-mono border-t border-slate-800">

    <!-- LEFT: System Status -->
    <div class="flex gap-3 items-center">
      <span id="systemStatus" class="hover:text-white cursor-pointer transition-colors">SYSTEM OK</span>
    </div>

    <!-- CENTER: Version -->
    <div class="flex items-center gap-1">
      <span id="versionTag" class="version"></span>
    </div>

    <!-- RIGHT: Updater -->
    <div class="flex items-center gap-3 text-indigo-400">

      <!-- Update Status Text -->
      <span id="updateStatus" class="text-indigo-300">
        Checkingâ€¦
      </span>

      <!-- Manual Check Button -->
      <button id="updateCheckBtn"
        class="hover:text-indigo-200 uppercase tracking-widest font-bold transition-colors">
        Check
      </button>

    </div>

  </footer>

  <script src="dist/bundle.js"></script>
</body>
</html>